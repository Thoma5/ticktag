<div class="col-md-10 col-md-offset-1 form-box">
  <div *ngIf="loading">
    <tt-loading></tt-loading>
  </div>
  <div *ngIf="!loading">
    <div class="search row">
      <div class="col-md-4"><input class="form-control" type='text' placeholder='Type to filter name...' (keyup)='updateFilter($event)' /></div>
    </div>
    <datatable class="material" [rows]="rows" [columns]="columns" [columnMode]="'force'" [headerHeight]="50" [footerHeight]="50"
      [rowHeight]="auto" [externalPaging]="true" [count]="totalElements" [offset]="offset" [limit]="limit" [scrollbarH]="true"
      [scrollbarV]="false" [loadingIndicator]="reloading" [externalSorting]="true" (sort)="onSort($event)" (page)='onPage($event)' [cssClasses]="iconsCss">
      <datatable-column name="Number">
        <template let-value="value">
          <p><strong>#{{value}}</strong></p>
        </template>
      </datatable-column>
      <datatable-column name="Title">
        <template let-value="value">
          {{value}}
        </template>
      </datatable-column>
      <datatable-column name="Tags">
         <template let-column="column">
          Tags
        </template>
        <template let-row="row" let-value="value">
          <tt-tagview [tags]="value" (tagClicked)="onTagClicked($event)"></tt-tagview>
        </template>
      </datatable-column>
      <datatable-column name="Users">
        <template let-column="column">
          Users
        </template>
        <template let-row="row" let-value="value">
          <div style="float:left;margin-left:40px" float="left" *ngFor='let v of value.keys()'>
             <tt-assigned-user-overview [user]="v"></tt-assigned-user-overview>
          </div>          
        </template>
      </datatable-column>
      <datatable-column name="StoryPoints" [width]="64">
        <template let-row="row" let-value="value">
          {{value}}
        </template>
      </datatable-column>
         <datatable-column name="DueDate" [width]="64">
        <template let-row="row" let-value="value">
          {{value | date: 'dd.MM.yyyy'}}
        </template>
      </datatable-column>
      <datatable-column name="Progress">
         <template let-column="column">
          Progress
        </template>
        <template let-row="row" let-value="value">
          <div style="border:solid 1px #ddd;margin:5px;padding:3px">
            <div style="background:#999;height:10px" [style.width]="75+'%'"></div>
          </div>
        </template>
      </datatable-column>
    </datatable>
  </div>
</div>
